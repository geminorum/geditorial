((l,e,a)=>{if(void 0!==e){let n={wrap:"div."+e._base+"-wrap.-newpost-layout",form:"div."+e._base+"-wrap.-newpost-layout form.-form-form",save:"a.button.-form-save-draft"},i={request:null,strings:l.extend({},{notarget:"Cannot handle the target window!",willgo:"Your Draft save successfully. will redirect you in moments &hellip;"},e[a].strings||{}),getFormData:function(e){return l(e).serializeArray().reduce(function(e,a){var t=/^(\w+)\[(\w+)\]$/.exec(a.name);return t?(void 0===e[t[1]]&&(e[t[1]]={}),e[t[1]][t[2]]=a.value):void 0!==e[t=a.name.replace("[]","")]?Array.isArray(e[t])?e[t].push(a.value):e[t]=[e[t],a.value]:e[t]=a.value,e},{})},init:function(){l(n.save,n.wrap).removeClass("disabled").on("click",function(e){e.preventDefault(),i.doSaveDraft(l(this).data("endpoint"),l(this).data("target"))}),l(n.form).on("submit",function(e){e.preventDefault(),i.request&&"pending"===i.request.state()||l(n.save,n.wrap).trigger("click")})},doSaveDraft:function(e,a){var t=i.getFormData(n.form);let r=l(n.save,n.wrap),s=l(".-message",n.wrap),o=l(".-loading",n.wrap);i.request=wp.apiRequest({url:e,data:t,type:"POST",dataType:"json",beforeSend:function(){s.html("").removeClass("-error"),o.addClass("is-active"),r.addClass("disabled")}}).done(function(e){"paired"!==a&&("none"===a?(s.html(i.strings.willgo).addClass("-success"),setTimeout(()=>{window.location.replace(e.link)},5e3)):s.html(i.strings.notarget).addClass("-error")),console.log(e)}).fail(function(e){s.html(e.responseJSON.message).addClass("-error"),console.log(e.responseJSON)}).always(function(){o.removeClass("is-active"),r.removeClass("disabled")})}};l(function(){i.init(),l(document).trigger("gEditorial:Module:Loaded",[a,i])})}})(jQuery,gEditorial,"_template");