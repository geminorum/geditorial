((p,f,a)=>{if(void 0!==f){let u={action:f._base+"_"+a,classs:f._base+"-"+a,spinner:"span.-loading",theday:"span.-the-day-number",msg:"."+f._base+"-"+a+"-calendar > .-wrap.-messages",cal:"#"+f._base+"-"+a+"-calendar",box:"#"+f._base+"-"+a+"-add-new"},s={rtl:!1,append:function(a){var e=p(u.box),t=p(a).parents("td.-day")[0];e.appendTo(t).show(),p('input[data-field="type"]',e).val(p(a).data("type")),p('input[data-field="day"]',e).val(p(t).data("day")),p('input[data-field="month"]',e).val(p(u.cal).data("month")),p('input[data-field="year"]',e).val(p(u.cal).data("year")),p('input[data-field="title"]',e).attr("placeholder",p(a).data("title")).trigger("focus")},close:function(a){p(u.box).hide(),a&&p('input[data-field="title"]',u.box).val("")},save:function(){var a=p(u.box),e=p(":input",a).serialize(),t=p('input[data-field="day"]',a).val(),d=p('input[data-field="nonce"]',a).val();let n=p('td[data-day="'+t+'"]'),l=p('input[data-field="title"]',a),o=p(u.msg),i=n.find(u.spinner);p.ajax({url:f._url,method:"POST",data:{action:u.action,what:"addnew",data:e,nonce:d},beforeSend:function(a){l.prop("disabled",!0),i.addClass("is-active"),o.html("")},success:function(a,e,t){l.prop("disabled",!1),i.removeClass("is-active"),a.success?(p(a.data).appendTo(p("ol",n)),s.close(!0)):(o.html(a.data),s.close(),setTimeout(function(){o.html("")},4500))}})},reschedule:function(d,a,e,t,n,l){var o=p(u.cal),i=p('td[data-day="'+t+'"]');let s=i.find(u.theday),c=i.find(u.spinner),r=p(u.msg);p.ajax({url:f._url,method:"POST",data:{action:u.action,what:"reschedule",day:t,month:n||o.data("month"),year:l||o.data("year"),cal:o.data("calendar"),post_id:a,nonce:e},beforeSend:function(a){s.hide(),c.addClass("is-active"),d.sortable("disable"),r.html("")},success:function(a,e,t){s.show(),c.removeClass("is-active"),d.sortable("enable"),r.html(a.data),setTimeout(function(){r.html("")},4500)}})}};p(function(){s.rtl="rtl"===p("html").attr("dir"),p("a.-the-day-newpost",u.cal).on("click",function(a){a.preventDefault(),s.append(this)}),p('a[data-action="close"]',u.box).on("click",function(a){a.preventDefault(),s.close(!0)}),p('a[data-action="save"]',u.box).on("click",function(a){a.preventDefault(),s.save()}),p('input[data-field="title"]',u.box).on("enterKey",function(a){s.save()}),p('input[data-field="title"]',u.box).on("keyup",function(a){13===a.keyCode?s.save():27===a.keyCode&&s.close()});let l=p("ol.-sortable, td.-next-prev").sortable({group:u.classs,handle:"span.-handle",containerSelector:"ol, td",nested:!1,delay:200,tolerance:6,distance:10,onDrop:function(a,e,t){var d=p(a).data("day"),n=p(e.el).data("day");n?d!==n&&(s.reschedule(l,p(a).data("post"),p(a).data("nonce"),n),p(a).data("day",n)):(s.reschedule(l,p(a).data("post"),p(a).data("nonce"),1,p(e.el).data("month"),p(e.el).data("year")),p(a).remove()),t(a,e)},onDrag:function(a,e,t,d){s.rtl&&(e={top:e.top,right:-1*(e.left-a.outerWidth())}),t(a,e,t,d)},afterMove:function(a,e,t){p("td",u.cal).removeClass("-dragged-here"),p(e.el).parent("td").addClass("-dragged-here"),p(e.el).addClass("-dragged-here")}});p(document).trigger("gEditorialReady",[a,s])})}})(jQuery,gEditorial,"schedule");