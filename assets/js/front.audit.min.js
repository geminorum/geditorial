(function(b,d,f,a){var e={};e.e=true;e.action=d._base+"_"+a;e.box="#wp-admin-bar-geditorial-audit-box";e.button="#wp-admin-bar-geditorial-audit-attributes a.ab-item";e.spinner=".geditorial-spinner";e.watch=function(){var c;b(":input",e.box).change(function(){clearTimeout(c);c=setTimeout(function(){e.store()},1000)})};e.store=function(){var c=b(":input",e.box).serialize();var g=b(e.button).find(e.spinner);b.ajax({url:d._url,method:"POST",data:{action:e.action,what:"store",post_id:d[a].post_id,data:c,nonce:d[a]._nonce},beforeSend:function(h){g.addClass("is-active")},success:function(h,j,i){g.removeClass("is-active");if(h.success){b(e.box).html(h.data);e.watch()}}})};e.populate=function(){if(!this.e){return}var c=b(this.button).find(this.spinner);b.ajax({url:d._url,method:"POST",data:{action:e.action,what:"list",post_id:d[a].post_id,nonce:d[a]._nonce},beforeSend:function(g){c.addClass("is-active")},success:function(g,i,h){c.removeClass("is-active");if(g.success){b(e.box).html(g.data);e.e=false;e.watch()}}})};b(function(){b(e.button).click(function(c){c.preventDefault();e.populate()})})}(jQuery,gEditorial,gEditorialModules,"audit"));