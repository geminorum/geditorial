!function(t,a,e){function n(t){var a={};return t=t.replace(/<a[^h]*(?=href="[^"]*#_(?:ftn|edn|etc)ref([0-9]+)")[^>]*>\[([0-9]+)\]<\/a>(.*)/g,function(t,e,n,r){return a[e]=r.replace(/^\s*./,"").trim(),""}),t.replace(/<a[^h]*(?=href="[^"]*#_(?:ftn|edn|etc)([0-9]+)")[^>]*>(?:<\w+>)*\[([0-9]+)\](?:<\/\w+>)*<\/a>/g,function(t,e,n,r,o){return"[ref]"+a[e].replace(/\r\n|\r|\n/g," ").trim()+"[/ref]"})}function r(t){return t.replace(/(»)(.+?)(«)/g,"«$2»").replace(/(”)(.+?)(“)/g,"“$2”")}function o(t){return t.toString().replace(/[۱۲۳۴۵۶۷۸۹۰]+/g,function(t){return t.split("").map(function(t){return t.charCodeAt(0)%1776}).join("")})}function i(t,a){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),e.setAttribute("download",t),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}var s=t.extend({},{virastar_on_paste:!1},a[e].settings),l={text:"#titlewrap input, input#attachment_alt, input#tag-name, #edittag input#name, [data-"+e+"='text']",markdown:"[data-"+e+"='markdown']",html:"textarea#excerpt:not(.wp-editor-area), textarea#attachment_caption, textarea#tag-description, #edittag textarea#description, [data-"+e+"='html']"},d={number:"[data-"+e+"='number']"},c=t.extend({},{button_virastar:'<span class="dashicons dashicons-text"></span>',button_virastar_title:"Apply Virastar!",qtag_virastar:"Virastar!",qtag_virastar_title:"Apply Virastar!",qtag_swapquotes:"Swap Quotes",qtag_swapquotes_title:"Swap Not-Correct Quotes",qtag_mswordnotes:"Word Footnotes",qtag_mswordnotes_title:"MS Word Footnotes to WordPress [ref]",qtag_download:"Download",qtag_download_title:"Download text as markdown",qtag_nbsp:"nbsp",qtag_nbsp_title:"Non-Breaking SPace"},a[e].strings),p='<a href="#" class="do-'+e+'" title="'+c.button_virastar_title+'" tabindex="-1">'+c.button_virastar+"</a>",u=a[e].virastar||{},v={text:new Virastar(t.extend({},u,{preserve_HTML:!1,preserve_URIs:!1,preserve_frontmatter:!1})),markdown:new Virastar(t.extend({},u,{preserve_frontmatter:!1,skip_markdown_ordered_lists_numbers_conversion:!0})),html:new Virastar(t.extend({},u,{preserve_frontmatter:!1,preserve_brackets:!0,preserve_braces:!0}))},m={number:function(){var a=t(this);try{a.prop("type","text")}catch(t){}a.change(function(){a.val(o(a.val()).replace(/[^\d.-]/g,"").trim())})}},g={nbsp:"",virastar:"",swapquotes:"content",mswordnotes:"content",download:"content"},f={nbsp:function(t,a,e){QTags.insertContent("\n\n&nbsp;\n\n")},virastar:function(a,e,n){var r=e.value.substring(e.selectionStart,e.selectionEnd);""!==r?QTags.insertContent(v.html.cleanup(r)):t(e).val(v.html.cleanup(t(e).val()))},swapquotes:function(a,e,n){t(e).val(r(t(e).val()))},mswordnotes:function(a,e,r){t(e).val(n(t(e).val()))},download:function(a,e,n){var r="Untitled",o="";t("#title").length&&t("#title").val()?r=t("#title").val().trim():t("#tag-name").length&&t("#tag-name").val()?r=t("#tag-name").val().trim():t("#name").length&&t("#name").val()?r=t("#name").val().trim():t("#post_ID").length&&(r="Untitled-"+t("#post_ID").val()),t("input[data-meta-title]").each(function(a){var e=t(this).val();e&&(o=o+t(this).data("meta-title")+": "+e+"\n")}),o&&(o="---\n"+o+"---\n\n"),i(r+".md",o+"## "+r+"\n"+t(e).val())}};t(function(){for(var a in l)t(l[a]).each(function(){t(this).data(e,a).addClass("target-"+e).add(t(p)).wrapAll('<span class="'+e+"-input-wrap "+e+"-input-"+a+'-wrap"></span>')}),t("a.do-"+e).on("click",function(a){a.preventDefault();var n=t(this).closest("."+e+"-input-wrap").find(".target-"+e);n.val(v[n.data(e)].cleanup(n.val()))}),s.virastar_on_paste&&t(".target-"+e).on("paste",function(){var a=this;setTimeout(function(){var n=t(a);n.val(v[n.data(e)].cleanup(n.val()))},100)});for(var n in d)t(d[n]).each(function(){m[n].call(this)});if("undefined"!=typeof QTags)for(var r in g)QTags.addButton(r,c["qtag_"+r],f[r],"","",c["qtag_"+r+"_title"],0,g[r]);try{document.post.title.focus()}catch(t){}t(document).trigger("gEditorialReady",[e,null])})}(jQuery,gEditorial,"ortho");