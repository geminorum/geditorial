!function(o,t,n){var r=o.extend({},{virastar_on_paste:!1},t[n].settings),i={text:"#titlewrap input, input#attachment_alt, input#tag-name, #edittag input#name, [data-ortho='text']",markdown:"[data-ortho='markdown']",html:"textarea#excerpt:not(.wp-editor-area), textarea#attachment_caption, textarea#tag-description, #edittag textarea#description, [data-ortho='html']"},s={number:"[data-ortho='number']",alphabet:"[data-ortho='alphabet']"},l=o.extend({},{button_virastar:'<span class="dashicons dashicons-text"></span>',button_virastar_title:"Apply Virastar!",qtag_virastar:"Virastar!",qtag_virastar_title:"Apply Virastar!",qtag_swapquotes:"Swap Quotes",qtag_swapquotes_title:"Swap Not-Correct Quotes",qtag_mswordnotes:"Word Footnotes",qtag_mswordnotes_title:"MS Word Footnotes to WordPress [ref]",qtag_download:"Download",qtag_download_title:"Download text as markdown",qtag_nbsp:"nbsp",qtag_nbsp_title:"Non-Breaking SPace"},t[n].strings),c='<a href="#" class="do-ortho" title="'+l.button_virastar_title+'" tabindex="-1">'+l.button_virastar+"</a>",t=t[n].virastar||{};const p={text:new Virastar(o.extend({},t,{preserve_HTML:!1,preserve_URIs:!1,preserve_frontmatter:!1})),markdown:new Virastar(o.extend({},t,{preserve_frontmatter:!1,skip_markdown_ordered_lists_numbers_conversion:!0})),html:new Virastar(o.extend({},t,{preserve_frontmatter:!1,preserve_brackets:!0,preserve_braces:!0}))};function a(t){return t.toString().replace(/[۱۲۳۴۵۶۷۸۹۰]+/g,function(t){return t.split("").map(function(t){return t.charCodeAt(0)%1776}).join("")})}const d={number:function(){const t=o(this);try{t.prop("type","text")}catch(t){}t.on("change",function(){t.val(a(t.val()).replace(/[^\d.-]/g,"").trim())})},alphabet:function(){const t=o(this);try{t.prop("type","text")}catch(t){}t.on("change",function(){t.val(a(t.val()).replace(/[^a-zA-Z]/gi,"").trim().toUpperCase())})}};var u={nbsp:"",virastar:"",swapquotes:"content",mswordnotes:"content",download:"content"},v={nbsp:function(t,a,e){QTags.insertContent("\n\n&nbsp;\n\n")},virastar:function(t,a,e){var n=a.value.substring(a.selectionStart,a.selectionEnd);""!==n?QTags.insertContent(p.html.cleanup(n)):o(a).val(p.html.cleanup(o(a).val()))},swapquotes:function(t,a,e){o(a).val(o(a).val().replace(/(»)(.+?)(«)/g,"«$2»").replace(/(”)(.+?)(“)/g,"“$2”"))},mswordnotes:function(t,a,e){o(a).val(function(t){const o={};return(t=t.replace(/<a[^h]*(?=href="[^"]*#_(?:ftn|edn|etc)ref([0-9]+)")[^>]*>\[([0-9]+)\]<\/a>(.*)/g,function(t,a,e,n){return o[a]=n.replace(/^\s*./,"").trim(),""})).replace(/<a[^h]*(?=href="[^"]*#_(?:ftn|edn|etc)([0-9]+)")[^>]*>(?:<\w+>)*\[([0-9]+)\](?:<\/\w+>)*<\/a>/g,function(t,a,e,n,r){return"[ref]"+o[a].replace(/\r\n|\r|\n/g," ").trim()+"[/ref]"})}(o(a).val()))},download:function(t,a,e){let n="Untitled",r="";o("#title").length&&o("#title").val()?n=o("#title").val().trim():o("#tag-name").length&&o("#tag-name").val()?n=o("#tag-name").val().trim():o("#name").length&&o("#name").val()?n=o("#name").val().trim():o("#post_ID").length&&(n="Untitled-"+o("#post_ID").val()),o("input[data-meta-title]").each(function(t){var a=o(this).val();a&&(r=r+o(this).data("meta-title")+": "+a+"\n")}),r=r&&"---\n"+r+"---\n\n",function(t,a){const e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),e.setAttribute("download",t),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}(n+".md",r+"## "+n+"\n"+o(a).val())}};o(function(){for(var t in i)o(i[t]).each(function(){o(this).data(n,t).addClass("target-"+n).add(o(c)).wrapAll('<span class="ortho-input-wrap ortho-input-'+t+'-wrap"></span>')}),o("a.do-"+n).on("click",function(t){t.preventDefault();const a=o(this).closest(".ortho-input-wrap").find(".target-"+n);a.val(p[a.data(n)].cleanup(a.val()))}),r.virastar_on_paste&&o(".target-"+n).on("paste",function(){var a=this;setTimeout(function(){const t=o(a);t.val(p[t.data(n)].cleanup(t.val()))},100)});for(var a in s)o(s[a]).each(function(){d[a].call(this)});if("undefined"!=typeof QTags)for(var e in u)QTags.addButton(e,l["qtag_"+e],v[e],"","",l["qtag_"+e+"_title"],0,u[e]);try{document.post.title.focus()}catch(t){}o(document).trigger("gEditorialReady",[n,null])})}(jQuery,gEditorial,"ortho");