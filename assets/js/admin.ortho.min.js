(function(b,d,f,a){var e={};e.t={text:"#titlewrap input, input#attachment_alt, input#tag-name, #edittag input#name, [data-"+a+"='text']",markdown:"[data-"+a+"='markdown']",html:"textarea#excerpt, textarea#attachment_caption, textarea#tag-description, #edittag textarea#description, [data-"+a+"='html']"};e.i={number:"[data-"+a+"='number']",};e.s=b.extend({},{button_virastar:'<span class="dashicons dashicons-filter">',button_virastar_title:"Apply Virastar!",qtag_virastar:"Virastar!",qtag_virastar_title:"Apply Virastar!",qtag_swapquotes:"Swap Quotes",qtag_swapquotes_title:"Swap Not-Correct Quotes",qtag_mswordnotes:"Word Footnotes",qtag_mswordnotes_title:"MS Word Footnotes to WordPress [ref]",qtag_download:"Download",qtag_download_title:"Download text as markdown",qtag_nbsp:"nbsp",qtag_nbsp_title:"Non-Breaking SPace",},d[a].strings);e.b='<a href="#" class="do-'+a+'" title="'+e.s.button_virastar_title+'" tabindex="-1">'+e.s.button_virastar+"</span></a>";e.w='<span class="'+a+'-input-wrap"></span>';e.o=d[a].virastar||{};e.v={text:new Virastar(b.extend({},e.o,{preserve_HTML:false,preserve_URIs:false,preserve_brackets:false,preserve_braces:false})),markdown:new Virastar(b.extend({},e.o,{fix_dashes:false,cleanup_spacing:false,cleanup_begin_and_end:false,skip_markdown_ordered_lists_numbers_conversion:false})),html:new Virastar(b.extend({},e.o,{cleanup_spacing:false}))};e.n={number:function(){var g=b(this);try{g.prop("type","text")}catch(c){}g.change(function(){g.val(e.u.tE(g.val()).replace(/[^\d.-]/g,"").trim())})},};e.u={pF:function(h){var g={};h=h.replace(/\<a[^h]*(?=href\=\"[^\"]*\#_(?:ftn|edn|etc)ref([0-9]+)\")[^>]*\>\[([0-9]+)\]\<\/a\>(.*)/g,function(c,k,j,i){g[k]=i.replace(/^\s*./,"").trim();return""});return h.replace(/\<a[^h]*(?=href\=\"[^\"]*\#_(?:ftn|edn|etc)([0-9]+)\")[^>]*\>(?:\<\w+\>)*\[([0-9]+)\](?:\<\/\w+\>)*\<\/a\>/g,function(c,l,k,j,i){return"[ref]"+g[l].replace(/\r\n|\r|\n/g," ").trim()+"[/ref]"})},sQ:function(g){return g.replace(/(»)(.+?)(«)/g,"«$2»").replace(/(”)(.+?)(“)/g,"“$2”")},tP:function(g){var c="۰".charCodeAt(0);return g.toString().replace(/\d+/g,function(h){return h.split("").map(function(i){return String.fromCharCode(c+parseInt(i))}).join("")})},tE:function(c){return c.toString().replace(/[۱۲۳۴۵۶۷۸۹۰]+/g,function(g){return g.split("").map(function(h){return h.charCodeAt(0)%1776}).join("")})},downloadText:function(c,h){var g=document.createElement("a");g.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(h));g.setAttribute("download",c);g.style.display="none";document.body.appendChild(g);g.click();document.body.removeChild(g)}};e.q={nbsp:function(h,i,g){QTags.insertContent("\n\n&nbsp;\n\n")},virastar:function(i,j,g){var h=j.value.substring(j.selectionStart,j.selectionEnd);if(h!==""){QTags.insertContent(e.v.html.cleanup(h))}else{b(j).val(e.v.html.cleanup(b(j).val()))}},swapquotes:function(h,i,g){b(i).val(e.u.sQ(b(i).val()))},mswordnotes:function(h,i,g){b(i).val(e.u.pF(b(i).val()))},download:function(j,k,h){var g="Untitled";var i="";if(b("#title").length&&b("#title").val()){g=b("#title").val().trim()}else{if(b("#tag-name").length&&b("#tag-name").val()){g=b("#tag-name").val().trim()}else{if(b("#name").length&&b("#name").val()){g=b("#name").val().trim()}else{if(b("#post_ID").length){g="Untitled-"+b("#post_ID").val()}}}}b("input[data-meta-title]").each(function(c){var l=b(this).val();if(l){i=i+b(this).data("meta-title")+": "+l+"\n"}});if(i){i="---\n"+i+"---\n\n"}e.u.downloadText(g+".md",i+"## "+g+"\n"+b(k).val())},};b(document).ready(function(){for(var h in e.t){b(e.t[h]).each(function(){b(this).data(a,h).addClass("target-"+a).add(b(e.b)).wrapAll('<span class="'+a+"-input-wrap "+a+"-input-"+h+'-wrap"></span>')});b("a.do-"+a).on("click",function(k){k.preventDefault();var i=b(this).closest("."+a+"-input-wrap").find(".target-"+a);i.val(e.v[i.data(a)].cleanup(i.val()))});b(".target-"+a).on("paste",function(){var i=this;setTimeout(function(){var k=b(i);k.val(e.v[k.data(a)].cleanup(k.val()))},100)})}for(var g in e.i){b(e.i[g]).each(function(){e.n[g].call(this)})}if(typeof(QTags)!=="undefined"){for(var c in e.q){QTags.addButton(c,e.s["qtag_"+c],e.q[c],"","",e.s["qtag_"+c+"_title"])}}try{document.post.title.focus()}catch(j){}});f[a]=e;if(d._dev){console.log(e)}}(jQuery,gEditorial,gEditorialModules,"ortho"));