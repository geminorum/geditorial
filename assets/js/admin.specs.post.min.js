(function(d,e,g,a){var b={action:e._base+"_"+a,classs:e._base+"-"+a,wrap:"ol."+e._base+"-"+a+"-list",raw:"ul."+e._base+"-"+a+"-new",body:".item-body"};var f={reOrder:function(){var c=d("input.item-order");var h=c.length;c.each(function(i){d(this).val(h-i)})},expandItem:function(h){d(b.body,b.wrap).slideUp();var c=d(h).parent().parent().find(b.body);if(!c.is(":visible")){c.slideDown()}},removeItem:function(c){d(c).closest("li").slideUp("normal",function(){d(this).remove()})},newItem:function(c){if(d(c).parents(b.wrap).length){return false}var h=d(c).find(":selected").val();if(h==="-1"){return false}d(b.body,b.wrap).slideUp();var i=d("li",b.raw).clone(true);d(c).find(":selected").prop("disabled",true);i.find("select.item-dropdown-new").removeClass("item-dropdown-new");i.find("span.item-excerpt").html(d(c).find(":selected").text());i.find('select.item-dropdown option[value="-1"]').remove();i.find('select.item-dropdown option[value="'+h+'"]').selected=true;i.appendTo(b.wrap);i.find(b.body).slideDown();i.find("textarea").focus();this.reOrder()}};d(function(){d("select.item-dropdown-new",b.raw).change(function(){return f.newItem(this)});d("body").on("click",b.wrap+" .item-delete",function(c){c.preventDefault();f.removeItem(this)});d("body").on("click",b.wrap+" .item-excerpt",function(c){c.preventDefault();f.expandItem(this)});d(b.wrap).sortable({group:b.classs,handle:".item-handle",stop:function(){f.reOrder()}})})}(jQuery,gEditorial,gEditorialModules,"specs"));