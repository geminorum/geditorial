((d,t,a)=>{if(void 0!==t){let i={form:"div#"+t._base+"-newpost form.-form",wrap:"div.-wrap.geditorial-wrap.-newpost-layout",recent:"div.-recents ul li a.-row-link-custom",save:"a.button.-save-draft"},e={request:null,strings:d.extend({},{noparent:"This page has no parent window!",notarget:"Cannot handle the target window!",closeme:"New post has been saved you may close this!"},t[a].strings||{}),init:function(){let a=this;self===top?d(".-message",i.wrap).html(a.strings.noparent).addClass("-error"):(d(i.recent,i.wrap).on("click",function(e){e.preventDefault(),a.handleRecent(d(this).data("post"),d(this).data("type"))}),d(i.save,i.wrap).removeClass("disabled").on("click",function(e){e.preventDefault(),a.doSaveDraft(d(this).data("endpoint"),d(this).data("target"))}),d(i.form).on("submit",function(e){e.preventDefault(),a.request&&"pending"===a.request.state()||d(i.save,i.wrap).trigger("click")}))},handleRecent:function(e,a){d("select."+t._base+'-paired-to-post-dropdown[data-type="'+a+'"]',window.parent.document).val(e).change(),self.parent.tb_remove()},handlePaired:function(e){var a=d("select."+t._base+'-paired-to-post-dropdown[data-type="'+e.type+'"]',window.parent.document);a.removeClass("hidden").append('<option value="'+e.id+'">'+e.title.rendered+"</option>").val(e.id).change(),window.parent.jQuery(a).trigger("chosen:updated"),self.parent.tb_remove()},getFormData:function(e){return d(e).serializeArray().reduce(function(e,a){var t=/^(\w+)\[(\w+)\]$/.exec(a.name);return t?(void 0===e[t[1]]&&(e[t[1]]={}),e[t[1]][t[2]]=a.value):void 0!==e[t=a.name.replace("[]","")]?Array.isArray(e[t])?e[t].push(a.value):e[t]=[e[t],a.value]:e[t]=a.value,e},{})},doSaveDraft:function(e,a){let t=this;var n=t.getFormData(i.form);let r=d(i.save,i.wrap),s=d(".-message",i.wrap),o=d(".-loading",i.wrap);console.log(n),t.request=wp.apiRequest({url:e,data:n,type:"POST",dataType:"json",beforeSend:function(){s.html("").removeClass("-error"),o.addClass("is-active"),r.addClass("disabled")}}).done(function(e){"paired"===a?t.handlePaired(e):"none"===a?s.html(t.strings.closeme).addClass("-success"):s.html(t.strings.notarget).addClass("-error"),console.log(e)}).fail(function(e){s.html(e.responseJSON.message).addClass("-error"),console.log(e.responseJSON)}).always(function(){o.removeClass("is-active"),r.removeClass("disabled")})}};d(function(){e.init(),d(document).trigger("gEditorialReady",[a,e])})}})(jQuery,gEditorial,"_newpost");