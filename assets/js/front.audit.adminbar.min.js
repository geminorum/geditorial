((i,n,e)=>{let o={action:n._base+"_"+e,button:"#wp-admin-bar-"+n._base+"-"+e+"-assignbox > a.ab-item",wrap:"#wp-admin-bar-"+n._base+"-"+e+"-assignbox-content",spinner:"."+n._base+"-spinner"},t={debounce:function(e,a){let i=null;return function(){let t=c,n=arguments;clearTimeout(i),i=setTimeout(function(){e.apply(t,n)},a)}}},c={empty:!0,init:function(){i(o.button).on("click",function(t){t.preventDefault(),c.populate()})},watch:function(){i(":input",o.wrap).on("change",t.debounce(function(){c.store()},1e3))},store:function(){var t=i(":input",o.wrap).serialize();let a=i(o.button).find(o.spinner);i.ajax({url:n._url,method:"POST",data:{action:o.action,what:"store",post_id:n[e].post_id,nonce:n[e]._nonce,data:t},beforeSend:function(t){a.addClass("is-active")},success:function(t,n,e){a.removeClass("is-active"),t.success&&(i(o.wrap).html(t.data),c.watch())}})},populate:function(){if(c.empty){let a=i(o.button).find(o.spinner);i.ajax({url:n._url,method:"POST",data:{action:o.action,what:"list",post_id:n[e].post_id,nonce:n[e]._nonce},beforeSend:function(t){a.addClass("is-active")},success:function(t,n,e){a.removeClass("is-active"),t.success&&(i(o.wrap).html(t.data),c.empty=!1,c.watch())}})}}};i(function(){i(document).trigger("gEditorial:Module:Loaded",[e,"adminbar",c,c.init()])})})(jQuery,gEditorial,"audit");